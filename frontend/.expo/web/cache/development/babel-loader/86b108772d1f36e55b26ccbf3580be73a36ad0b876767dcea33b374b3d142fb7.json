{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\sunvi\\\\Documents\\\\GitHub\\\\behavior-dev-team\\\\frontend\\\\src\\\\context\\\\AuthProvider.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar AuthContext = createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    loggedInUser = _useState2[0],\n    setLoggedInUser = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  useEffect(function () {\n    var auth = getAuth();\n    var unsubscribe = onAuthStateChanged(auth, function _callee(user) {\n      var rememberMe;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!user) {\n              _context.next = 10;\n              break;\n            }\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('rememberMe'));\n          case 3:\n            rememberMe = _context.sent;\n            if (!(rememberMe === 'true')) {\n              _context.next = 7;\n              break;\n            }\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', JSON.stringify(user)));\n          case 7:\n            setLoggedInUser(user);\n            _context.next = 13;\n            break;\n          case 10:\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem('user'));\n          case 12:\n            setLoggedInUser(null);\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }, null, null, null, Promise);\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  useEffect(function () {\n    var loadUserFromStorage = function loadUserFromStorage() {\n      var user;\n      return _regeneratorRuntime.async(function loadUserFromStorage$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('user'));\n          case 2:\n            user = _context2.sent;\n            if (user) {\n              setLoggedInUser(JSON.parse(user));\n            }\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, null, null, null, Promise);\n    };\n    loadUserFromStorage();\n  }, []);\n  var signUp = function signUp(email, password, rememberMe) {\n    var auth, userCredential, user;\n    return _regeneratorRuntime.async(function signUp$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          auth = getAuth();\n          _context3.prev = 1;\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(createUserWithEmailAndPassword(auth, email, password));\n        case 4:\n          userCredential = _context3.sent;\n          user = userCredential.user;\n          if (!rememberMe) {\n            _context3.next = 13;\n            break;\n          }\n          _context3.next = 9;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', JSON.stringify(user)));\n        case 9:\n          _context3.next = 11;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('rememberMe', 'true'));\n        case 11:\n          _context3.next = 17;\n          break;\n        case 13:\n          _context3.next = 15;\n          return _regeneratorRuntime.awrap(AsyncStorage.removeItem('user'));\n        case 15:\n          _context3.next = 17;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('rememberMe', 'false'));\n        case 17:\n          setLoggedInUser(user);\n          _context3.next = 23;\n          break;\n        case 20:\n          _context3.prev = 20;\n          _context3.t0 = _context3[\"catch\"](1);\n          setError(_context3.t0.message);\n        case 23:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, null, null, [[1, 20]], Promise);\n  };\n  var signIn = function signIn(email, password, rememberMe) {\n    var auth, userCredential, user;\n    return _regeneratorRuntime.async(function signIn$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          auth = getAuth();\n          _context4.prev = 1;\n          _context4.next = 4;\n          return _regeneratorRuntime.awrap(signInWithEmailAndPassword(auth, email, password));\n        case 4:\n          userCredential = _context4.sent;\n          user = userCredential.user;\n          if (!rememberMe) {\n            _context4.next = 13;\n            break;\n          }\n          _context4.next = 9;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', JSON.stringify(user)));\n        case 9:\n          _context4.next = 11;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('rememberMe', 'true'));\n        case 11:\n          _context4.next = 17;\n          break;\n        case 13:\n          _context4.next = 15;\n          return _regeneratorRuntime.awrap(AsyncStorage.removeItem('user'));\n        case 15:\n          _context4.next = 17;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('rememberMe', 'false'));\n        case 17:\n          setLoggedInUser(user);\n          _context4.next = 23;\n          break;\n        case 20:\n          _context4.prev = 20;\n          _context4.t0 = _context4[\"catch\"](1);\n          setError(_context4.t0.message);\n        case 23:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, null, null, [[1, 20]], Promise);\n  };\n  return React.createElement(AuthContext.Provider, {\n    value: {\n      loggedInUser: loggedInUser,\n      setLoggedInUser: setLoggedInUser,\n      signUp: signUp,\n      signIn: signIn,\n      error: error\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport var useAuth = function useAuth() {\n  return useContext(AuthContext);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","AsyncStorage","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","loggedInUser","setLoggedInUser","_useState3","_useState4","error","setError","auth","unsubscribe","_callee","user","rememberMe","_regeneratorRuntime","async","_callee$","_context","prev","next","awrap","getItem","sent","setItem","JSON","stringify","removeItem","stop","Promise","loadUserFromStorage","loadUserFromStorage$","_context2","parse","signUp","email","password","userCredential","signUp$","_context3","t0","message","signIn","signIn$","_context4","createElement","Provider","value","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","useAuth"],"sources":["C:/Users/sunvi/Documents/GitHub/behavior-dev-team/frontend/src/context/AuthProvider.js"],"sourcesContent":["/**\r\n * Create a context to manage authentication state. \r\n * This allows different parts of the app to access and modify the authentication state.\r\n */\r\nimport React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword } from 'firebase/auth';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [loggedInUser, setLoggedInUser] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const auth = getAuth();\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        const rememberMe = await AsyncStorage.getItem('rememberMe');\r\n        if (rememberMe === 'true') {\r\n          await AsyncStorage.setItem('user', JSON.stringify(user));\r\n        }\r\n        setLoggedInUser(user);\r\n      } else {\r\n        await AsyncStorage.removeItem('user');\r\n        setLoggedInUser(null);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const loadUserFromStorage = async () => {\r\n      const user = await AsyncStorage.getItem('user');\r\n      if (user) {\r\n        setLoggedInUser(JSON.parse(user));\r\n      }\r\n    };\r\n    loadUserFromStorage();\r\n  }, []);\r\n\r\n  const signUp = async (email, password, rememberMe) => {\r\n    const auth = getAuth();\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n      if (rememberMe) {\r\n        await AsyncStorage.setItem('user', JSON.stringify(user));\r\n        await AsyncStorage.setItem('rememberMe', 'true');\r\n      } else {\r\n        await AsyncStorage.removeItem('user');\r\n        await AsyncStorage.setItem('rememberMe', 'false');\r\n      }\r\n      setLoggedInUser(user);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const signIn = async (email, password, rememberMe) => {\r\n    const auth = getAuth();\r\n    try {\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n      if (rememberMe) {\r\n        await AsyncStorage.setItem('user', JSON.stringify(user));\r\n        await AsyncStorage.setItem('rememberMe', 'true');\r\n      } else {\r\n        await AsyncStorage.removeItem('user');\r\n        await AsyncStorage.setItem('rememberMe', 'false');\r\n      }\r\n      setLoggedInUser(user);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ loggedInUser, setLoggedInUser, signUp, signIn, error }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}