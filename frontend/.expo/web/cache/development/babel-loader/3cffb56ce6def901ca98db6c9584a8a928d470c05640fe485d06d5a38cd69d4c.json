{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\sunvi\\\\Documents\\\\GitHub\\\\behavior-dev-team\\\\frontend\\\\src\\\\context\\\\AuthProvider.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword } from 'firebase/auth';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar AuthContext = createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    loggedInUser = _useState2[0],\n    setLoggedInUser = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  useEffect(function () {\n    var auth = getAuth();\n    var unsubscribe = onAuthStateChanged(auth, function _callee(user) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!user) {\n              _context.next = 6;\n              break;\n            }\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', JSON.stringify(user)));\n          case 3:\n            setLoggedInUser(user);\n            _context.next = 9;\n            break;\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem('user'));\n          case 8:\n            setLoggedInUser(null);\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, null, null, null, Promise);\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  useEffect(function () {\n    var loadUserFromStorage = function loadUserFromStorage() {\n      var user;\n      return _regeneratorRuntime.async(function loadUserFromStorage$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('user'));\n          case 2:\n            user = _context2.sent;\n            if (user) {\n              setLoggedInUser(JSON.parse(user));\n            }\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, null, null, null, Promise);\n    };\n    loadUserFromStorage();\n  }, []);\n  var signUp = function signUp(email, password) {\n    var auth, userCredential, user;\n    return _regeneratorRuntime.async(function signUp$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          auth = getAuth();\n          _context3.prev = 1;\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(createUserWithEmailAndPassword(auth, email, password));\n        case 4:\n          userCredential = _context3.sent;\n          user = userCredential.user;\n          _context3.next = 8;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', JSON.stringify(user)));\n        case 8:\n          setLoggedInUser(user);\n          _context3.next = 14;\n          break;\n        case 11:\n          _context3.prev = 11;\n          _context3.t0 = _context3[\"catch\"](1);\n          setError(_context3.t0.message);\n        case 14:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, null, null, [[1, 11]], Promise);\n  };\n  return React.createElement(AuthContext.Provider, {\n    value: {\n      loggedInUser: loggedInUser,\n      setLoggedInUser: setLoggedInUser,\n      signUp: signUp,\n      error: error\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport var useAuth = function useAuth() {\n  return useContext(AuthContext);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","AsyncStorage","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","loggedInUser","setLoggedInUser","_useState3","_useState4","error","setError","auth","unsubscribe","_callee","user","_regeneratorRuntime","async","_callee$","_context","prev","next","awrap","setItem","JSON","stringify","removeItem","stop","Promise","loadUserFromStorage","loadUserFromStorage$","_context2","getItem","sent","parse","signUp","email","password","userCredential","signUp$","_context3","t0","message","createElement","Provider","value","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","useAuth"],"sources":["C:/Users/sunvi/Documents/GitHub/behavior-dev-team/frontend/src/context/AuthProvider.js"],"sourcesContent":["/**\r\n * Create a context to manage authentication state. \r\n * This allows different parts of the app to access and modify the authentication state.\r\n */\r\n// src/context/AuthProvider.js\r\nimport React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword } from 'firebase/auth';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [loggedInUser, setLoggedInUser] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const auth = getAuth();\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        await AsyncStorage.setItem('user', JSON.stringify(user));\r\n        setLoggedInUser(user);\r\n      } else {\r\n        await AsyncStorage.removeItem('user');\r\n        setLoggedInUser(null);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const loadUserFromStorage = async () => {\r\n      const user = await AsyncStorage.getItem('user');\r\n      if (user) {\r\n        setLoggedInUser(JSON.parse(user));\r\n      }\r\n    };\r\n    loadUserFromStorage();\r\n  }, []);\r\n\r\n  const signUp = async (email, password) => {\r\n    const auth = getAuth();\r\n    try {\r\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n      const user = userCredential.user;\r\n      await AsyncStorage.setItem('user', JSON.stringify(user));\r\n      setLoggedInUser(user);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ loggedInUser, setLoggedInUser, signUp, error }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}