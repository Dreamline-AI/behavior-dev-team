{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\sunvi\\\\Documents\\\\GitHub\\\\behavior-dev-team\\\\frontend\\\\src\\\\context\\\\AuthProvider.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nvar AuthContext = createContext();\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    loggedInUser = _useState2[0],\n    setLoggedInUser = _useState2[1];\n  useEffect(function () {\n    var auth = getAuth();\n    var unsubscribe = onAuthStateChanged(auth, function _callee(user) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!user) {\n              _context.next = 6;\n              break;\n            }\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem('user', JSON.stringify(user)));\n          case 3:\n            setLoggedInUser(user);\n            _context.next = 9;\n            break;\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(AsyncStorage.removeItem('user'));\n          case 8:\n            setLoggedInUser(null);\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, null, null, null, Promise);\n    });\n    return function () {\n      return unsubscribe();\n    };\n  }, []);\n  useEffect(function () {\n    var loadUserFromStorage = function loadUserFromStorage() {\n      var user;\n      return _regeneratorRuntime.async(function loadUserFromStorage$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('user'));\n          case 2:\n            user = _context2.sent;\n            if (user) {\n              setLoggedInUser(JSON.parse(user));\n            }\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, null, null, null, Promise);\n    };\n    loadUserFromStorage();\n  }, []);\n  return React.createElement(AuthContext.Provider, {\n    value: {\n      loggedInUser: loggedInUser,\n      setLoggedInUser: setLoggedInUser\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport var useAuth = function useAuth() {\n  return useContext(AuthContext);\n};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","getAuth","onAuthStateChanged","AsyncStorage","AuthContext","AuthProvider","_ref","children","_useState","_useState2","_slicedToArray","loggedInUser","setLoggedInUser","auth","unsubscribe","_callee","user","_regeneratorRuntime","async","_callee$","_context","prev","next","awrap","setItem","JSON","stringify","removeItem","stop","Promise","loadUserFromStorage","loadUserFromStorage$","_context2","getItem","sent","parse","createElement","Provider","value","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","useAuth"],"sources":["C:/Users/sunvi/Documents/GitHub/behavior-dev-team/frontend/src/context/AuthProvider.js"],"sourcesContent":["/**\r\n * Create a context to manage authentication state. \r\n * This allows different parts of the app to access and modify the authentication state.\r\n */\r\n// src/context/AuthProvider.js\r\nimport React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { getAuth, onAuthStateChanged } from 'firebase/auth';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [loggedInUser, setLoggedInUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const auth = getAuth();\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (user) {\r\n        await AsyncStorage.setItem('user', JSON.stringify(user));\r\n        setLoggedInUser(user);\r\n      } else {\r\n        await AsyncStorage.removeItem('user');\r\n        setLoggedInUser(null);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const loadUserFromStorage = async () => {\r\n      const user = await AsyncStorage.getItem('user');\r\n      if (user) {\r\n        setLoggedInUser(JSON.parse(user));\r\n      }\r\n    };\r\n    loadUserFromStorage();\r\n  }, []);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ loggedInUser, setLoggedInUser }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":";;;;AAKA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC7E,SAASC,OAAO,EAAEC,kBAAkB,QAAQ,eAAe;AAC3D,OAAOC,YAAY,MAAM,2CAA2C;AAEpE,IAAMC,WAAW,GAAGP,aAAa,CAAC,CAAC;AAEnC,OAAO,IAAMQ,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EACrC,IAAAC,SAAA,GAAwCV,QAAQ,CAAC,IAAI,CAAC;IAAAW,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA/CG,YAAY,GAAAF,UAAA;IAAEG,eAAe,GAAAH,UAAA;EAEpCV,SAAS,CAAC,YAAM;IACd,IAAMc,IAAI,GAAGZ,OAAO,CAAC,CAAC;IACtB,IAAMa,WAAW,GAAGZ,kBAAkB,CAACW,IAAI,EAAE,SAAAE,QAAOC,IAAI;MAAA,OAAAC,mBAAA,CAAAC,KAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAA,KAClDN,IAAI;cAAAI,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OAAAL,mBAAA,CAAAM,KAAA,CACApB,YAAY,CAACqB,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACV,IAAI,CAAC,CAAC;UAAA;YACxDJ,eAAe,CAACI,IAAI,CAAC;YAACI,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OAAAL,mBAAA,CAAAM,KAAA,CAEhBpB,YAAY,CAACwB,UAAU,CAAC,MAAM,CAAC;UAAA;YACrCf,eAAe,CAAC,IAAI,CAAC;UAAC;UAAA;YAAA,OAAAQ,QAAA,CAAAQ,IAAA;QAAA;MAAA,qBAAAC,OAAA;IAAA,CAEzB,CAAC;IAEF,OAAO;MAAA,OAAMf,WAAW,CAAC,CAAC;IAAA;EAC5B,CAAC,EAAE,EAAE,CAAC;EAENf,SAAS,CAAC,YAAM;IACd,IAAM+B,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA;MAAA,IAAAd,IAAA;MAAA,OAAAC,mBAAA,CAAAC,KAAA,UAAAa,qBAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAAX,IAAA,GAAAW,SAAA,CAAAV,IAAA;UAAA;YAAAU,SAAA,CAAAV,IAAA;YAAA,OAAAL,mBAAA,CAAAM,KAAA,CACJpB,YAAY,CAAC8B,OAAO,CAAC,MAAM,CAAC;UAAA;YAAzCjB,IAAI,GAAAgB,SAAA,CAAAE,IAAA;YACV,IAAIlB,IAAI,EAAE;cACRJ,eAAe,CAACa,IAAI,CAACU,KAAK,CAACnB,IAAI,CAAC,CAAC;YACnC;UAAC;UAAA;YAAA,OAAAgB,SAAA,CAAAJ,IAAA;QAAA;MAAA,qBAAAC,OAAA;IAAA,CACF;IACDC,mBAAmB,CAAC,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;EAEN,OACElC,KAAA,CAAAwC,aAAA,CAAChC,WAAW,CAACiC,QAAQ;IAACC,KAAK,EAAE;MAAE3B,YAAY,EAAZA,YAAY;MAAEC,eAAe,EAAfA;IAAgB,CAAE;IAAA2B,MAAA,EAAAC,KAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC5DtC,QACmB,CAAC;AAE3B,CAAC;AAED,OAAO,IAAMuC,OAAO,GAAG,SAAVA,OAAOA,CAAA;EAAA,OAAS9C,UAAU,CAACI,WAAW,CAAC;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}